'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _path=require('path'),_path2=_interopRequireDefault(_path),_package=require('../package.json'),_package2=_interopRequireDefault(_package),_task=require('./task'),_task2=_interopRequireDefault(_task),_client=require('./client'),_client2=_interopRequireDefault(_client),_utils=require('./utils');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}class ConvertAPI{constructor(a,b={}){this.secret=a,this.baseUri=b.baseUri||'https://v2.convertapi.com',this.conversionTimeout=b.conversionTimeout||180,this.conversionTimeoutDelta=b.conversionTimeoutDelta||10,this.uploadTimeout=b.uploadTimeout||600,this.downloadTimeout=b.downloadTimeout||600,this.userAgent=`ConvertAPI-Node/${_package2.default.version}`,this.proxy=b.proxy,this.client=new _client2.default(this)}convert(a,b,c=null,d=null){var e=this;return _asyncToGenerator(function*(){const f=new _task2.default(e,c,a,b,d);return f.run()})()}getUser(){var a=this;return _asyncToGenerator(function*(){return a.client.get('user')})()}upload(a,b=null){var c=this;return _asyncToGenerator(function*(){const d=b||_path2.default.basename(a),e=(0,_utils.getReadableStream)(a);return c.client.upload(e,d)})()}}const init=(a,b={})=>new ConvertAPI(a,b);exports.default=init,module.exports=exports['default'];